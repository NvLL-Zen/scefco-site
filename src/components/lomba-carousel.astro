---
import EnglishSpeech from "../images/scefMascots/englishSpeech.png";
import Esai from "../images/scefMascots/esai.png";
import Futsal from "../images/scefMascots/futsal.png";
import Mhq from "../images/scefMascots/mhq.png";
import PidatoArab from "../images/scefMascots/pidatoArab.png";
import StoryTelling from "../images/scefMascots/storyTelling.png";
import tariSaman from "../images/scefMascots/tariSaman.png";
---

<h1 id="compeitition-title" class="hoverPop">COMPETITIONS</h1>
<div id="horizontal-scroll">
  <div id="carousel-container">
    <div class="carousel-space"></div>
    <div class="carousel-item">
      <p class="lomba-title mobile">English Speech</p>
      <div class="carousel-item-divider left">
        <img
          alt="scefMascots"
          class="carousel-mascots"
          src={EnglishSpeech.src}
        />
      </div>
      <div class="carousel-item-divider right">
        <div class="scefSignup">
          <p class="lomba-title pc">English Speech</p>
          <div class="signup-items">
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button>SIGN UP!</button>
            </a>
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button class="juknis-button">JUKNIS</button>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="carousel-item">
      <p class="lomba-title mobile">Esai</p>
      <div class="carousel-item-divider left">
        <img alt="scefMascots" class="carousel-mascots" src={Esai.src} />
      </div>
      <div class="carousel-item-divider right">
        <div class="scefSignup">
          <p class="lomba-title pc">Esai</p>
          <div class="signup-items">
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button>SIGN UP!</button>
            </a>
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button class="juknis-button">JUKNIS</button>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="carousel-item">
      <p class="lomba-title mobile">Futsal</p>
      <div class="carousel-item-divider left">
        <img alt="scefMascots" class="carousel-mascots" src={Futsal.src} />
      </div>
      <div class="carousel-item-divider right">
        <div class="scefSignup">
          <p class="lomba-title pc">Futsal</p>
          <div class="signup-items">
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button>SIGN UP!</button>
            </a>
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button class="juknis-button">JUKNIS</button>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="carousel-item">
      <p class="lomba-title mobile">MHQ</p>
      <div class="carousel-item-divider left">
        <img alt="scefMascots" class="carousel-mascots" src={Mhq.src} />
      </div>
      <div class="carousel-item-divider right">
        <div class="scefSignup">
          <p class="lomba-title pc">MHQ</p>
          <div class="signup-items">
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button>SIGN UP!</button>
            </a>
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button class="juknis-button">JUKNIS</button>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="carousel-item">
      <p class="lomba-title mobile">Pidato Arab</p>
      <div class="carousel-item-divider left">
        <img alt="scefMascots" class="carousel-mascots" src={PidatoArab.src} />
      </div>
      <div class="carousel-item-divider right">
        <div class="scefSignup">
          <p class="lomba-title pc">Pidato Arab</p>
          <div class="signup-items">
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button>SIGN UP!</button>
            </a>
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button class="juknis-button">JUKNIS</button>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="carousel-item">
      <p class="lomba-title mobile">Story Telling</p>
      <div class="carousel-item-divider left">
        <img
          alt="scefMascots"
          class="carousel-mascots"
          src={StoryTelling.src}
        />
      </div>
      <div class="carousel-item-divider right">
        <div class="scefSignup">
          <p class="lomba-title pc">Story Telling</p>
          <div class="signup-items">
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button>SIGN UP!</button>
            </a>
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button class="juknis-button">JUKNIS</button>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="carousel-item">
      <p class="lomba-title mobile">Tari Saman</p>
      <div class="carousel-item-divider left">
        <img alt="scefMascots" class="carousel-mascots" src={tariSaman.src} />
      </div>
      <div class="carousel-item-divider right">
        <div class="scefSignup">
          <p class="lomba-title pc">Tari Saman</p>
          <div class="signup-items">
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button>SIGN UP!</button>
            </a>
            <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">
              <button class="juknis-button">JUKNIS</button>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="carousel-space"></div>

    <style>
      /* * {
        border: 1px solid red;
      } */
      @keyframes rotate360 {
        from {
          transform: rotateY(0deg);
        }

        to {
          transform: rotateY(360deg);
        }
      }

      .active {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      #carousel-container {
        background-color: transparent;
        width: max-content;
        height: 50vh;
        padding: 5px;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      #horizontal-scroll {
        width: 100%;
        overflow-x: scroll;
        background-color: transparent;
      }

      #compeitition-title {
        color: black;
        background-color: transparent;
      }

      .carousel-item-divider {
        background-color: transparent;
        width: 50%;
        height: 100%;
        /* border: 3px solid purple; */
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .left {
        width: 35vh;
      }

      .right {
        justify-content: center;
      }

      .carousel-mascots {
        width: 40vw;
        height: 40vw;
        max-width: 35vh;
        max-height: 35vh;
      }

      .scefSignup {
        display: flex;
        flex-direction: column;
        background-color: transparent;
        align-items: center;
      }

      p {
        margin-bottom: 5px;
        font-size: calc(var(--p-fz) + 1vw);
        font-weight: 700;
      }

      a {
        width: 100%;
        color: black;
        background: transparent;
        text-align: center;
      }

      button {
        width: fit-content;
        color: black;
        background: transparent;
        border: 0.75px solid black;
        border-radius: 9px;
        font-size: calc(var(--p-fz) + 0.5vw);
        transition: all 0.3s ease;
        padding: 5px;
        padding-left: 10px;
        padding-right: 10px;
        font-weight: 700;
        user-drag: none;
        -webkit-user-drag: none;
        user-select: none;
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none;
      }

      button:hover {
        background: black;
        color: white;
      }

      img{
        user-drag: none;
        -webkit-user-drag: none;
        user-select: none;
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none;
        pointer-events: none;
      }

      .carousel-item {
        width: 40vw;
        height: 40vh;
        border: 0.5px solid black;
        border-radius: 10px;
        background-color: white;
        color: black;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: transform 0.3s ease; /* Add smooth transition for scale */
      }

      .carousel-space {
        width: 28vw;
        height: 40vh;
        background-color: transparent;
      }

      .carousel-item:hover {
        transform: scale(1.2);
      }

      .carousel-item.in-view {
        transform: scale(1.2);
      }

      .pc {
        display: inline;
      }

      .mobile {
        display: none;
      }

      @media only screen and (max-width: 720px) {
        * {
          /* border: 1px solid red; */
        }

        #horizontal-scroll {
          height: 65vh;
          display: flex;
          align-items: center;
        }

        .carousel-item-divider {
          width: 100%;
          height: 50%;
        }

        .right {
          height: 30%;
          justify-content: center;
        }

        .carousel-item {
          flex-direction: column;
          width: 50vw;
          height: 50vh;
        }

        .signup-items {
          display: flex;
          flex-direction: column;
          gap: 10px;
        }

        .carousel-space {
          width: 22vw;
        }

        .pc {
          display: none;
        }

        .mobile {
          display: inline;
        }
      }
    </style>

    <script>
      let deviceWidth = Math.max(
        document.documentElement.clientWidth || 0,
        window.innerWidth || 0
      );
      if (deviceWidth <= 1024) {
        const carouselItems = document.querySelectorAll(".carousel-item");
        // Create an intersection observer to track visibility of elements
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("in-view"); // Add scale when in view
              } else {
                entry.target.classList.remove("in-view"); // Remove scale when out of view
              }
            });
          },
          {
            threshold: 1, // Adjust threshold so element has to be at least 50% visible to trigger
          }
        );

        // Observe each carousel item
        carouselItems.forEach((item) => {
          observer.observe(item);
        });
      } else {
        const slider = document.querySelector("#horizontal-scroll");
        let isDown = false;
        let startX;
        let scrollLeft;

        slider.addEventListener("mousedown", (e) => {
          isDown = true;
          slider.classList.add("active");
          startX = e.pageX - slider.offsetLeft;
          scrollLeft = slider.scrollLeft;
        });
        slider.addEventListener("mouseleave", () => {
          isDown = false;
          slider.classList.remove("active");
        });
        slider.addEventListener("mouseup", () => {
          isDown = false;
          slider.classList.remove("active");
        });
        slider.addEventListener("mousemove", (e) => {
          if (!isDown) return;
          e.preventDefault();
          const x = e.pageX - slider.offsetLeft;
          const walk = (x - startX) * 3; //scroll-fast
          slider.scrollLeft = scrollLeft - walk;
          console.log(walk);
        });
      }

      document.addEventListener("DOMContentLoaded", function () {
        const container = document.getElementById("horizontal-scroll");
        const carouselItems = document.querySelectorAll(".carousel-item");

        // Adjust this index to target the 4th item (index 3 for zero-based indexing)
        const targetItemIndex = 3;
        const targetItem = carouselItems[targetItemIndex];

        // Calculate the distance between the container and the target item
        const targetPosition = targetItem.offsetLeft - container.offsetLeft;

        // Scroll the container to the target position smoothly
        container.scrollTo({
          left:
            targetPosition -
            container.clientWidth / 2 +
            targetItem.clientWidth / 2, // Center the item
          behavior: "smooth", // Smooth scrolling
        });
      });

      //Target all carousel items

      //      const container = document.getElementById("horizontal-scroll");
      //  // where "container" is the id of the container
      //    container.addEventListener("wheel", function (e) {
      //      if (e.deltaY > 0) {
      //        container.scrollLeft += 125;
      //        e.preventDefault();
      //  // prevenDefault() will help avoid worrisome
      //  // inclusion of vertical scroll
      //      }
      //      else {
      //        container.scrollLeft -= 125;
      //        e.preventDefault();
      //      }
      //    });
    </script>
  </div>
</div>
