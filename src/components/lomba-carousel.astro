---
import { Image } from "astro:assets";
import EnglishSpeech from "../images/scefMascots/englishSpeech.png";
import Esai from "../images/scefMascots/esai.png";
import Futsal from "../images/scefMascots/futsal.png";
import Mhq from "../images/scefMascots/mhq.png";
import PidatoArab from "../images/scefMascots/pidatoArab.png";
import StoryTelling from "../images/scefMascots/storyTelling.png";
import tariSaman from "../images/scefMascots/tariSaman.png";
import LombaTemplate from "./lomba-template.astro";
import Competitions_Title from "../images/titles/comps.png"
---

<Image id="comp_title" src={Competitions_Title} alt="Competitions"></Image>
<div id="horizontal-scroll">
  <div id="carousel-container">
    <div class="carousel-space"></div>
    <LombaTemplate namaLomba="English Speech" photo={EnglishSpeech}></LombaTemplate>
    <LombaTemplate namaLomba="Esai" photo={Esai}></LombaTemplate>
    <LombaTemplate namaLomba="Futsal" photo={Futsal}></LombaTemplate>
    <LombaTemplate namaLomba="MHQ" photo={Mhq}></LombaTemplate>
    <LombaTemplate namaLomba="Pidato Arab" photo={PidatoArab}></LombaTemplate>
    <LombaTemplate namaLomba="Story Telling" photo={StoryTelling}></LombaTemplate>
    <LombaTemplate namaLomba="Tari Saman" photo={tariSaman}></LombaTemplate>
    <div class="carousel-space"></div>
  </div>
</div>

<style>
  #carousel-container {
    display: flex;
    gap: 5px;
    padding: 5px;
    align-items: center;
    height: 60vh;
    background-color: transparent;
    width: max-content;
  }

  #horizontal-scroll {
    width: 100%;
    overflow-x: scroll;
    cursor: grab;
    background-color: transparent;
  }

  #horizontal-scroll.active {
    cursor: grabbing;
  }

  #comp_title {
    width: 50vw;
    height: 10vw;
  }

  .carousel-space {
    width: 28vw;
    height: 40vh;
    background-color: transparent;
  }

  .carousel-item {
    width: 40vw;
    height: 40vh;
    background-color: white;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.3s ease;
  }

  .carousel-item:hover {
    transform: scale(1.2);
  }

  @media only screen and (max-width: 720px) {
    #comp_title {
      width: 75vw;
      height: 15vw;
  
    }
  }
</style>

<script>
  const slider = document.querySelector("#horizontal-scroll");
  let isDown = false;
  let startX;
  let scrollLeft;

  slider.addEventListener("mousedown", (e) => {
    isDown = true;
    slider.classList.add("active");
    startX = e.pageX - slider.offsetLeft;
    scrollLeft = slider.scrollLeft;
  });

  slider.addEventListener("mouseleave", () => {
    isDown = false;
    slider.classList.remove("active");
  });

  slider.addEventListener("mouseup", () => {
    isDown = false;
    slider.classList.remove("active");
  });

  slider.addEventListener("mousemove", (e) => {
    if (!isDown) return;
    e.preventDefault();
    const x = e.pageX - slider.offsetLeft;
    const walk = (x - startX) * 2; // Adjust scrolling speed
    slider.scrollLeft = scrollLeft - walk;
  });

  document.addEventListener("DOMContentLoaded", function () {
        const container = document.getElementById("horizontal-scroll");
        const carouselItems = document.querySelectorAll(".carousel-item");

        // Adjust this index to target the 4th item (index 3 for zero-based indexing)
        const targetItemIndex = 3;
        const targetItem = carouselItems[targetItemIndex];

        // Calculate the distance between the container and the target item
        const targetPosition = targetItem.offsetLeft - container.offsetLeft;

        // Scroll the container to the target position smoothly
        container.scrollTo({
          left:
            targetPosition -
            container.clientWidth / 2 +
            targetItem.clientWidth / 2, // Center the item
          behavior: "smooth", // Smooth scrolling
        });
      });
</script>

